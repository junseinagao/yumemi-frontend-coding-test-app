# カバーレター

株式会社ゆめみ コーディング試験採点担当 様

このたびはご多忙な折、ゆめみ採用選考における本プログラムの採点にお時間をいただきありがとうございます。本文章では、コミットからは伝わりづらい本プログラム開発における背景について記載させていただきます。


## 本プログラム開発における背景

本プログラムは、私個人で開発しながらも将来的には複数人で開発する想定で設計・実装しました。最初にタスクの分解と見積もりを[Github Projects Beta](https://github.com/users/junseinagao/projects/1)を用いて行い、実装中に出てきた伝えるべき事項は(各Issue)[https://github.com/junseinagao/yumemi-frontend-coding-test-app/issues?q=]に記載しました。

本プログラムは、課題期限までに完成しませんでした。これについては、私が開発工数の見積もりを誤ったことに起因する失敗です。しかし、最低限の機能要件を実装できたために提出に至りました。

本プログラムにおいては、JestとReact Testing Libraryを使ったユニットテストを並行して実装しました。私はReact.jsを使ったSPA開発を１年あまり経験してきましたが、React.jsを使った開発においてテストを実装するのは初めての取り組みとなりました。今回、テストを実装するにあたって[初めての自動テスト――Webシステムのための自動テスト基礎(Jonathan Rasmusson　著、玉川 紘子　訳 2017年09月 発行)](https://www.oreilly.co.jp/books/9784873118161/)を使ってテストについて学習しその実装に取りかかり、プロトタイプ開発の途中まではTDDの様式に乗っ取って開発しましたが、初めての取り組みということもあり、ユニットテストの実装はとても稚拙なものとなっております。ユニットテストのプログラム評価にあたってはこの背景をふまえたうえでご評価して頂けると幸いです。(なぜ、そのような不慣れなユニットテストを実装した理由としては、機能要件自体は簡易なものだと見積もったうえで、それでもなお本プログラム開発において挑戦する部分を持ちたかったからです。)

実装においては、自身の開発経験から関心の分離を意識した実装にするように心がけています。具体的には、コンポーネント設計の部分においてプレゼンテーション層においては、ロジックを記述しないように意識し、React Suspense や React Error Boundary を用いてコンポーネントにおける責務を分けてコンポーネントの役割を分かりやすくするようにしました。しかし、カスタムフックスにおいて、それぞれの関数が別の関数に依存していることが多く関心の分離の達成したい目的である保守性を妨害する要因になっています。この点においては、今後実装を続ける機会においてカスタムフックスのテストを実装しながらリファクタリングしていく予定です。

外部APIとの接続部分と状態管理に関する実装においては、swrを用いたリクエスト数の削減を図っています。swrは同一のキーに対して結果をキャッシュする機構を持っており、正しく設定すればキャッシュを活用して外部APIとの通信を減らすことが可能です。しかしながら、納期の都合上、swrを活用したキャッシュ機構を実装することができませんでした。(テストも同様です。)また、2つあるエンドポイントのうち1つはswrを使わずに独自のキャッシュ機構を実装しています。これは、同時に複数のリクエストを管理する機能についてswrが最適なAPIを提供していなかったためです。このため、たった2つしかない外部API接続において1つはswrで実装されており、1つはスクラッチで実装されています。この点において、swrが将来的に負債になるおそれがあるため他の状態管理ライブラリに差し替える予定です。

本プログラムにおけるセキュリティの懸念事項としては、クライアントに表出しているRESAS APIのAPI Keyについて悪意を持った利用者によるAPI Keyの転用が考えられました。この点について対応するとしたら、FWにNext.js、ホスティング環境にVercelを採用していることをふまえて、RESAS APIのプロキシサーバーの役割を果たすサーバーレス関数をAPI Routesを用いて実装し、API Keyをプロキシサーバーに隠蔽し、プロキシサーバーへの接続はCORSによって制限する構成が考えられました。しかしながら、RESAS APIは外部のWeb APIであること、RESAS APIのAPI Keyは誰でも容易に正規の手段を用いて取得可能であることから、本セキュリティ懸念事項の危険性は薄いと判断して対応策は実装しておりません。

---

@junseinagao